openapi: 3.0.3
info:
  description: Documentation Nav portal REST API
  version: '0.1'
  title: Nav REST API
servers:
  - url: /rest
paths:
  /Dashboards:
    get:
      tags:
        - Dashboard
      summary: Hent navn og id på alle dashboard
      description: Henter id og navn på alle dashboard. Ikke tilhørende områder/tjenester.
      operationId: getDashboards
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DashboardNameId'
        '401':
          description: Unauthorized
          content: {}
        '403':
          description: Forbidden
          content: {}
        '404':
          description: Not Found
          content: {}
  /Dashboard:
    post:
      tags:
        - Dashboard
      summary: Legg til nytt dashboard.
      description: Legg til nytt dashboard. Id genereres i backend, og sendes tilbake
      operationId: addDashboard
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Dashboard'
          text/plain:
            schema:
              type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: string
                format: uuid
        '401':
          description: Unauthorized
          content: {}
        '403':
          description: Forbidden
          content: {}
        '404':
          description: Not Found
          content: {}
      deprecated: false
  /Dashboard/Update/{Dashboard_id}:
    put:
      tags:
        - Dashboard
      summary: Oppdater dashbordnavn
      description: Oppdater dashbord ved å legge inn nytt navn
      operationId: updateDashboard
      parameters:
        - name: Dashboard_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          'application/json':
            schema:
              $ref: '#/components/schemas/Dashboard'
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /Dashboard/{Dashboard_id}:
    put:
      tags:
        - Dashboard
      summary: Legg inn/ fjern/ endre rekkefølge på områder på dashbord
      description: Legg inn liste av område-ider som hører til på dashboardet. Første id vil komme først osv.
      operationId: putDashboards
      parameters:
        - name: Dashboard_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              type: array
              items:
                type: string
                format: uuid
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
          content: {}
        '403':
          description: Forbidden
          content: {}
        '404':
          description: Not Found
          content: {}
      deprecated: false
    get:
      tags:
        - Dashboard
      summary: Hent dashboard med innhold.
      description: henter et dashboard med alle underliggende områder/ tjenester
      operationId: getDashboard
      parameters:
        - name: Dashboard_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Dashboard'
        '401':
          description: Unauthorized
          content: {}
        '403':
          description: Forbidden
          content: {}
        '404':
          description: Not Found
          content: {}
      deprecated: false
    delete:
      tags:
        - Dashboard
      summary: Slett et dashboard med.
      description: sletter dashboard med uuid dashboard_id
      operationId: deleteDashboard
      parameters:
        - name: Dashboard_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: Deleted
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /Areas/{Dashboard_id}:
    get:
      tags:
        - Area
      summary: Alle områder
      operationId: AreasOnDashBoard
      description: Henter alle områder med underliggende tjenster
      parameters:
        - name: Dashboard_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Area'
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /Areas:
    get:
      tags:
        - Area
      summary: Alle områder
      operationId: Area
      description: Henter alle områder med underliggende tjenster
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Area'
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
    post:
      tags:
        - Area
      summary: Legg til ett nytt område
      requestBody:
        description: Legg til ett nytt område. Her trenger IKKE services å være med ved innsending.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Area'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /SubAreas:
    get:
      tags:
        - Area
      summary: Alle sub-områder
      operationId: SubArea
      description: Henter alle sub-områder med underliggende tjenster
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SubArea'
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /SubArea:
    post:
      tags:
        - Area
      summary: Legg til ett nytt sub-område
      requestBody:
        description: Legg til ett nytt sub-område. Her trenger IKKE services å være med ved innsending.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubArea'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /Area/{Area_id}/{Service_id}:
    put:
      tags:
        - Area
      summary: Legg en tjeneste til et område
      description: Legg inn uid for område og tjenesten som skal legges til det.
      parameters:
        - name: Area_id
          in: path
          required: true
          schema:
            type: string
        - name: Service_id
          in: path
          required: true
          schema:
            type: string

      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
    delete:
      tags:
        - Area
      summary: Fjern tjeneste fra område
      description: Legg inn uid for område og tjenesten som skal fjernes.
      parameters:
        - name: Area_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: Deleted
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /Area/{Area_id}:
    put:
      tags:
        - Area
      summary: Oppdater område
      description: Endre feltene i et område
      parameters:
        - name: Area_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Oppdater område - services trenger ikke være med.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Area'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
    delete:
      tags:
        - Area
      summary: Fjern område
      description: Legg inn uid på området som skal fjernes.
      parameters:
        - name: Area_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: Deleted
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /Services/Types:
    get:
      tags:
        - Service
      summary: Hent alle tjenestetyper
      operationId: ServiceType
      description: Tjenester skal kategoriseres på typer som kan finnes her.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Applikasjon
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /Services/Status:
    get:
      tags:
        - Service
      summary: Hent alle statuser tjenester kan ha
      operationId: ServiceStatus
      description: Alle tjenester kan ha et utvalg statuser. Dette endepunktet skriver ut disse.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  example: Applikasjon
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /Components:
    get:
      tags:
        - Service
      summary: Hent alle komponenter med avhengigheter
      operationId: getComponents
      description: Henter alle komponenter med avhengigheter - ett lag dypt. Det vil si at dersom tjeneste A er avhengig av tjeneste B som er avhengig av tjeneste C, vil ikke avhengighet B => C dukke opp.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Service'
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /Services:
    get:
      tags:
        - Service
      summary: Hent alle tjenester med tjenesteavhengigheter
      operationId: getServices
      description: Henter alle tjenester med tjenesteavhengigheter - ett lag dypt. Det vil si at dersom tjeneste A er avhengig av tjeneste B som er avhengig av tjeneste C, vil ikke avhengighet B => C dukke opp.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Service'
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /Service:
    post:
      tags:
        - Service
      summary: Legg til tjeneste
      description: Opprett en ny tjeneste. Merk at type er predefinert og strengt, se endepunkt /Services/Types for en liste over mulige verdier.
      requestBody:
        description: Legg til en ny tjeneste
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Service'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
    put:
      tags:
        - Service
      summary: Rediger tjeneste
      description: Rediger tjenesteparametre
      requestBody:
        description: Oppdaterte verdier for tjeneste
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Service'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Updated
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }

  /Service/{Service_id}:
    get:
      tags:
        - Service
      summary: Hent en spesifikk tjeneste med tjenesteavhengigheter
      operationId: GetService
      description: Henter tjenestedata med tjenesteavhengigheter - ett lag dypt. Det vil si at dersom tjeneste A er avhengig av tjeneste B som er avhengig av tjeneste C, vil ikke avhengighet B => C dukke opp.
      parameters:
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Service'
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
    put:
      tags:
        - Service
      summary: Rediger tjeneste
      description: Rediger en tjeneste ved å legge ved UUIDen som er knyttet til denne. Merk at type er predefinert og strengt, se endepunkt /Services/Types for en liste over mulige verdier.
      parameters:
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Rediger eksisterende tjeneste
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Service'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
    delete:
      tags:
        - Service
      summary: Slett en tjeneste
      description: Slett tjeneste med id Service_id.
      parameters:
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: Deleted
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /Component/{Component_id}:
    delete:
      tags:
        - Service
      summary: Slett en komponent
      description: Slett komponent med id Component_id.
      parameters:
        - name: Component_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: Deleted
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /Service/Areas/{Service_id}:
    get:
      tags:
        - Service
      summary: Hent områder som har tjeneste med id
      operationId: GetAreasContainingService
      description: Hent områder som har tjeneste med id.
      parameters:
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Area'
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
      deprecated: false
  /Service/Maintenance:
    put:
      tags:
        - Service
      summary: Legg til vedlikeholdsmelding på tjeneste
      description: Legg til vedlikeholdsmelding på tjeneste
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Maintenance'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }

  /Service/Maintenance/{Service_id}:
    get:
      tags:
        - Service
      summary: Hent alle vedlikeholdsmeldinger på tjeneste
      description: Hent alle vedlikeholdsmeldinger på tjeneste
      parameters:
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Maintenance'
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }

  /Alert/test:
    post:
      tags:
        - Record
      summary: Legg til status på en tjeneste
      description: Legg til status på en tjeneste. Mulige statuser OK / DOWN / ISSUE.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Alert'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /ServiceStatus:
    post:
      tags:
        - Record
      summary: Legg til status på en tjeneste
      description: Legg til status på en tjeneste. Mulige statuser OK / DOWN / ISSUE.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceStatus'
          text/plain:
            schema:
              type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /ServiceStatus/{Service_id}:
    get:
      tags:
        - Record
      summary: Hent status-records fra en tjeneste med id Service_id
      description: Hent rapport på alle statuser lagt inn på en spesifikk service
      parameters:
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '201':
          description: Deleted
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
  /Service/{Service_id}/{DependentOnService_id}:
    put:
      tags:
        - Service
      summary: Legg til tjenesteavhengighet.
      description: Legg til en tjenesteavhengighet til tjenesten med id Service_id.
      parameters:
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
        - name: DependentOnService_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Created
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
    delete:
      tags:
        - Service
      summary: Sletter en tjenesteavhengighet
      description: Fjerner tjenesteavhengighet fra tjenesten med id Service_id til tjenesten med id dependentOnService_Id.
      parameters:
        - name: Service_id
          in: path
          required: true
          schema:
            type: string
        - name: DependentOnService_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Deleted
        '403':
          description: Forbidden
          content: { }
        '404':
          description: Not Found
          content: { }
components:
  schemas:
    DashboardNameId:
      title: Dashboard
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          example: "84e49ba0-7409-41ed-8ebe-949ad94dc1d3"
        name:
          type: string
          example: "Privatperson"
    Dashboard:
      title: Dashboard
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          example: "84e49ba0-7409-41ed-8ebe-949ad94dc1d3"
        name:
          type: string
          example: "Privatperson"
        areas:
          type: array
          readOnly: true
          items:
            $ref: '#/components/schemas/Area'
    Area:
      title: Area
      type: object
      properties:
        name:
          type: string
        id:
          type: string
          format: uuid
          readOnly: true
        description:
          type: string
        icon:
          type: string
        services:
          type: array
          readOnly: true
          items:
            $ref: '#/components/schemas/Service'
        subareas:
          type: array
          readOnly: true
          items:
            $ref: '#/components/schemas/SubArea'
        status:
          readOnly: true
          allOf:
            - $ref: '#/components/schemas/Status'
      required:
        - name
    SubArea:
      title: SubArea
      type: object
      properties:
        name:
          type: string
        id:
          type: string
          format: uuid
          readOnly: true
        services:
          type: array
          readOnly: true
          items:
            $ref: '#/components/schemas/Service'
      required:
        - name
    Service:
      title: Service
      type: object
      properties:
        name:
          type: string
        id:
          type: string
          format: uuid
          readOnly: true
        type:
          $ref: '#/components/schemas/ServiceType'
        team:
          type: string
        dependencies:
          type: array
          example: "[Liste av service objekter]"
          items:
            $ref: '#/components/schemas/Service'
        areasContainingThisService:
          type: array
          example: "[Liste av område UUIDer]"
          items:
            type: string
            format: uuid
        monitorlink:
          type: string
        pollingUrl:
          type: string
        status:
          readOnly: true
          allOf:
            - $ref: '#/components/schemas/Status'
    ServiceStatus:
      title: ServiceStatus
      type: object
      properties:
        serviceId:
          type: string
          format: uuid
        status:
          $ref: '#/components/schemas/Status'
        description:
          type: string
    Maintenance:
      title: Maintenance
      type: object
      properties:
        service_id:
          type: string
          format: uuid
          readOnly: true
          example: "84e49ba0-7409-41ed-8ebe-949ad94dc1d3"
        description:
          type: string
        startTime:
          type: string
          format: date-time
          example: "2017-07-21T17:30:00Z"
        endTime:
          type: string
          format: date-time
          example: "2017-07-21T19:32:28Z"
    Alert:
      title: Maintenance
      type: object
      properties:
        receiver:
          type: string
        status:
          type: string
        alerts:
          type: array
          items:
            type: string
    Status:
      type: string
      enum:
        - OK
        - ISSUE
        - DOWN
    ServiceType:
      type: string
      enum:
        - KOMPONENT
        - TJENESTE
